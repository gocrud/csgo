# å†³ç­–æ ‘æ±‡æ€»

æœ¬æ–‡æ¡£æ±‡æ€»äº†æ‰€æœ‰çš„å†³ç­–æ ‘ï¼Œå¸®åŠ©ä½ å¿«é€Ÿåšå‡ºæ¶æ„å†³ç­–ã€‚

---

## ğŸ“‹ ç›®å½•

1. [ä»£ç ä½ç½®å†³ç­–æ ‘](#ä»£ç ä½ç½®å†³ç­–æ ‘)
2. [ç»„ç»‡æ¨¡å¼é€‰æ‹©å†³ç­–æ ‘](#ç»„ç»‡æ¨¡å¼é€‰æ‹©å†³ç­–æ ‘)
3. [Domain æ¨¡å‹ä½ç½®å†³ç­–æ ‘](#domain-æ¨¡å‹ä½ç½®å†³ç­–æ ‘)
4. [DTO ç»„ç»‡å†³ç­–æ ‘](#dto-ç»„ç»‡å†³ç­–æ ‘)
5. [DTO å…±äº«ç­–ç•¥å†³ç­–æ ‘](#dto-å…±äº«ç­–ç•¥å†³ç­–æ ‘)
6. [internal ä½¿ç”¨å†³ç­–æ ‘](#internal-ä½¿ç”¨å†³ç­–æ ‘)
7. [å…±äº«å±‚æ¬¡å†³ç­–æ ‘](#å…±äº«å±‚æ¬¡å†³ç­–æ ‘)

---

## ä»£ç ä½ç½®å†³ç­–æ ‘

### ä½ çš„åŠŸèƒ½éœ€è¦è¢«å¤šä¸ªç«¯ä½¿ç”¨å—ï¼Ÿ

```
ä½ çš„åŠŸèƒ½éœ€è¦è¢«å¤šä¸ªç«¯ä½¿ç”¨å—ï¼Ÿ
â”‚
â”œâ”€ æ˜¯ â†’ æ”¾åœ¨ shared/
â”‚  â”‚
â”‚  â”œâ”€ æ•°æ®æ¨¡å‹ â†’ shared/domain/
â”‚  â”‚  â””â”€ ç¤ºä¾‹ï¼šuser.go, product.go, order.go
â”‚  â”‚
â”‚  â”œâ”€ æ•°æ®è®¿é—® â†’ shared/repositories/
â”‚  â”‚  â””â”€ ç¤ºä¾‹ï¼šuser_repository.go
â”‚  â”‚
â”‚  â”œâ”€ ä¸šåŠ¡æœåŠ¡ â†’ shared/services/
â”‚  â”‚  â””â”€ ç¤ºä¾‹ï¼šorder_service.go
â”‚  â”‚
â”‚  â””â”€ è·¨ç«¯ DTO â†’ shared/contracts/dtos/
â”‚     â””â”€ ç¤ºä¾‹ï¼šuser_response.go
â”‚
â””â”€ å¦ â†’ æ”¾åœ¨å¯¹åº”ç«¯çš„ features/
   â”‚
   â””â”€ apps/*/features/xxx/
      â”œâ”€ é€»è¾‘ç®€å•ï¼ˆ< 200 è¡Œï¼‰â†’ æ¨¡å¼1ï¼šå•æ–‡ä»¶å®ç°
      â”œâ”€ ä¸­ç­‰å¤æ‚ï¼ˆ200-1000 è¡Œï¼‰â†’ æ¨¡å¼2ï¼šæŒ‰æ“ä½œæ‹†åˆ†
      â””â”€ é€»è¾‘å¤æ‚ï¼ˆ> 1000 è¡Œï¼‰â†’ æ¨¡å¼3ï¼šå†…éƒ¨åˆ†å±‚
```

---

## ç»„ç»‡æ¨¡å¼é€‰æ‹©å†³ç­–æ ‘

### ä½ çš„åŠŸèƒ½ä»£ç é‡æœ‰å¤šå°‘ï¼Ÿ

```
ä½ çš„åŠŸèƒ½ä»£ç é‡æœ‰å¤šå°‘ï¼Ÿ
â”‚
â”œâ”€ < 200 è¡Œ
â”‚  â””â”€â†’ æ¨¡å¼1ï¼šå•æ–‡ä»¶å®ç°
â”‚     â””â”€ features/xxx/
â”‚        â”œâ”€â”€ handler.go           # æ‰€æœ‰é€»è¾‘
â”‚        â””â”€â”€ service_extensions.go
â”‚
â”‚     âœ… ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥
â”‚     âŒ ç¼ºç‚¹ï¼šæ–‡ä»¶å˜å¤§åä¸å¥½ç»´æŠ¤
â”‚
â”œâ”€ 200-1000 è¡Œ
â”‚  â””â”€â†’ æ¨¡å¼2ï¼šæŒ‰æ“ä½œæ‹†åˆ† â­æ¨è
â”‚     â””â”€ features/xxx/
â”‚        â”œâ”€â”€ models.go            # æ•°æ®æ¨¡å‹
â”‚        â”œâ”€â”€ store.go             # å†…éƒ¨æ•°æ®è®¿é—®ï¼ˆå¯é€‰ï¼‰
â”‚        â”œâ”€â”€ create_xxx.go        # åˆ›å»ºæ“ä½œ
â”‚        â”œâ”€â”€ list_xxx.go          # åˆ—è¡¨æ“ä½œ
â”‚        â”œâ”€â”€ update_xxx.go        # æ›´æ–°æ“ä½œ
â”‚        â”œâ”€â”€ controller.go        # è·¯ç”±æ˜ å°„
â”‚        â””â”€â”€ service_extensions.go
â”‚
â”‚     âœ… ä¼˜ç‚¹ï¼šç»“æ„æ¸…æ™°ï¼Œå›¢é˜Ÿåä½œå‹å¥½
â”‚     âŒ ç¼ºç‚¹ï¼šæ–‡ä»¶æ•°é‡å¤šä¸€äº›
â”‚
â””â”€ > 1000 è¡Œ
   â””â”€â†’ æ¨¡å¼3ï¼šå†…éƒ¨åˆ†å±‚
      â””â”€ features/xxx/
         â”œâ”€â”€ internal/            # å†…éƒ¨å®ç°
         â”‚   â”œâ”€â”€ entity/          # å†…éƒ¨å®ä½“
         â”‚   â”œâ”€â”€ data/            # æ•°æ®è®¿é—®å±‚
         â”‚   â””â”€â”€ business/        # ä¸šåŠ¡é€»è¾‘å±‚
         â”œâ”€â”€ models.go            # å¯¹å¤– DTO
         â”œâ”€â”€ generate_xxx.go      # Handler
         â”œâ”€â”€ controller.go
         â””â”€â”€ service_extensions.go

      âœ… ä¼˜ç‚¹ï¼šé€‚åˆå¤æ‚ä¸šåŠ¡ï¼ŒèŒè´£åˆ†å±‚æ¸…æ™°
      âŒ ç¼ºç‚¹ï¼šç»“æ„å¤æ‚ï¼Œéœ€è¦æ›´å¤šè§„åˆ’
```

---

## Domain æ¨¡å‹ä½ç½®å†³ç­–æ ‘

### è¿™ä¸ªå®ä½“ä¼šè¢«å¤šä¸ªç«¯ä½¿ç”¨å—ï¼Ÿ

```
è¿™ä¸ªå®ä½“ä¼šè¢«å¤šä¸ªç«¯ä½¿ç”¨å—ï¼Ÿ
â”‚
â”œâ”€ æ˜¯ â†’ æ˜¯æ ¸å¿ƒä¸šåŠ¡å®ä½“å—ï¼Ÿ
â”‚  â”‚
â”‚  â”œâ”€ æ˜¯ â†’ shared/domain/
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ç¤ºä¾‹ï¼š
â”‚  â”‚     â”œâ”€â”€ user.go          # ç”¨æˆ·å®ä½“ï¼ˆAdmin + API éƒ½ç”¨ï¼‰
â”‚  â”‚     â”œâ”€â”€ product.go       # å•†å“å®ä½“ï¼ˆAdmin + API éƒ½ç”¨ï¼‰
â”‚  â”‚     â””â”€â”€ order.go         # è®¢å•å®ä½“ï¼ˆAdmin + API éƒ½ç”¨ï¼‰
â”‚  â”‚
â”‚  â””â”€ å¦ â†’ æ˜¯é€šç”¨åŸºç¡€ç»“æ„å—ï¼Ÿ
â”‚     â”‚
â”‚     â”œâ”€ æ˜¯ â†’ shared/domain/common/
â”‚     â”‚  â”‚
â”‚     â”‚  â””â”€ ç¤ºä¾‹ï¼š
â”‚     â”‚     â”œâ”€â”€ base_entity.go   # æ‰€æœ‰è¡¨éƒ½æœ‰çš„åŸºç¡€å­—æ®µ
â”‚     â”‚     â”œâ”€â”€ soft_delete.go   # è½¯åˆ é™¤æ ‡è®°
â”‚     â”‚     â””â”€â”€ audit_fields.go  # å®¡è®¡å­—æ®µ
â”‚     â”‚
â”‚     â””â”€ å¦ â†’ é‡æ–°è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦è·¨ç«¯å…±äº«
â”‚
â””â”€ å¦ â†’ å•ç«¯ç‰¹æœ‰å®ä½“
   â”‚
   â””â”€â†’ apps/*/features/*/models/
      â”‚
      â””â”€ ç¤ºä¾‹ï¼š
         â”œâ”€â”€ admin_log.go        # ç®¡ç†ç«¯æ“ä½œæ—¥å¿—ï¼ˆåªæœ‰ Admin ç”¨ï¼‰
         â”œâ”€â”€ user_session.go     # ç”¨æˆ·ä¼šè¯ï¼ˆåªæœ‰ API ç”¨ï¼‰
         â””â”€â”€ user_preference.go  # ç”¨æˆ·åå¥½è®¾ç½®ï¼ˆåªæœ‰ API ç”¨ï¼‰
```

### Domain æ¨¡å‹ vs DTO å†³ç­–

```
æˆ‘éœ€è¦åˆ›å»ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ
â”‚
â”œâ”€ æ•°æ®åº“è¡¨æ˜ å°„ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚  â””â”€â†’ Domain æ¨¡å‹
â”‚     â”œâ”€ ä½ç½®ï¼šshared/domain/ æˆ– features/*/models/
â”‚     â”œâ”€ åŒ…å«ï¼šå®Œæ•´å­—æ®µï¼ˆåŒ…æ‹¬æ•æ„Ÿå­—æ®µï¼‰
â”‚     â”œâ”€ æ ‡ç­¾ï¼šgorm æ ‡ç­¾
â”‚     â””â”€ ç”¨é€”ï¼šä¸šåŠ¡é€»è¾‘ã€æ•°æ®æŒä¹…åŒ–
â”‚
â””â”€ API æ•°æ®ä¼ è¾“ï¼ˆå¤–éƒ¨æš´éœ²ï¼‰
   â””â”€â†’ DTO
      â”œâ”€ ä½ç½®ï¼šfeatures/*/models.go
      â”œâ”€ åŒ…å«ï¼šå¿…è¦å­—æ®µï¼ˆéšè—æ•æ„Ÿå­—æ®µï¼‰
      â”œâ”€ æ ‡ç­¾ï¼šjson + binding æ ‡ç­¾
      â””â”€ ç”¨é€”ï¼šè¯·æ±‚/å“åº”æ•°æ®ä¼ è¾“
```

---

## DTO ç»„ç»‡å†³ç­–æ ‘

### ä½ çš„åŠŸèƒ½æœ‰å¤šå°‘ä¸ª DTOï¼Ÿ

```
ä½ çš„åŠŸèƒ½æœ‰å¤šå°‘ä¸ª DTOï¼Ÿ
â”‚
â”œâ”€ < 3 ä¸ª DTO
â”‚  â””â”€â†’ æ–¹æ¡ˆ1ï¼šä¸æ“ä½œæ”¾åœ¨ä¸€èµ·
â”‚     â”‚
â”‚     â””â”€ features/xxx/create_xxx.go
â”‚        â”‚
â”‚        â”œâ”€â”€ type CreateXxxRequest struct { ... }
â”‚        â”œâ”€â”€ type XxxResponse struct { ... }
â”‚        â””â”€â”€ func (h *CreateXxxHandler) Handle(...) { ... }
â”‚
â”‚     âœ… é€‚ç”¨ï¼šç®€å•åŠŸèƒ½ï¼ŒDTO å·®å¼‚å¤§
â”‚     âœ… ä¼˜ç‚¹ï¼šåŠŸèƒ½å®Œå…¨å†…èš
â”‚     âŒ ç¼ºç‚¹ï¼šå¤šä¸ªæ“ä½œå¯èƒ½é‡å¤å®šä¹‰
â”‚
â”œâ”€ 3-10 ä¸ª DTO
â”‚  â”‚
â”‚  â”œâ”€ DTO ä¹‹é—´æœ‰å¤ç”¨ï¼Ÿ
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ æ˜¯ â†’ æ–¹æ¡ˆ2ï¼šåŠŸèƒ½å†… models.go â­æ¨è
â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ features/xxx/models.go
â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ // Request DTOs
â”‚  â”‚  â”‚     â”œâ”€â”€ type CreateXxxRequest struct { ... }
â”‚  â”‚  â”‚     â”œâ”€â”€ type UpdateXxxRequest struct { ... }
â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ // Response DTOs
â”‚  â”‚  â”‚     â”œâ”€â”€ type XxxResponse struct { ... }
â”‚  â”‚  â”‚     â”œâ”€â”€ type XxxListItem struct { ... }
â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚     â””â”€â”€ // è½¬æ¢å‡½æ•°
â”‚  â”‚  â”‚        â””â”€â”€ func toXxxResponse(entity) *XxxResponse { ... }
â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  âœ… é€‚ç”¨ï¼šä¸­ç­‰å¤æ‚ï¼Œéƒ¨åˆ†å…±äº«
â”‚  â”‚  â”‚  âœ… ä¼˜ç‚¹ï¼šåŠŸèƒ½å†… DTO é›†ä¸­ç®¡ç†
â”‚  â”‚  â”‚  âŒ ç¼ºç‚¹ï¼šmodels.go å¯èƒ½ä¼šå˜å¤§
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ å¦ â†’ æ–¹æ¡ˆ1ï¼šä¸æ“ä½œæ”¾åœ¨ä¸€èµ·
â”‚  â”‚
â”‚  â””â”€â†’ é»˜è®¤é€‰æ‹©ï¼šåŠŸèƒ½å†… models.go
â”‚
â””â”€ > 10 ä¸ª DTO
   â””â”€â†’ æ–¹æ¡ˆ3ï¼šåˆ†ç±»ç»„ç»‡
      â”‚
      â””â”€ features/xxx/
         â”‚
         â”œâ”€â”€ requests/            # è¯·æ±‚ DTO
         â”‚   â”œâ”€â”€ create_xxx.go
         â”‚   â”œâ”€â”€ update_xxx.go
         â”‚   â””â”€â”€ common.go        # å…±äº«çš„è¯·æ±‚ç»“æ„
         â”‚
         â”œâ”€â”€ responses/           # å“åº” DTO
         â”‚   â”œâ”€â”€ xxx_detail.go
         â”‚   â”œâ”€â”€ xxx_list.go
         â”‚   â””â”€â”€ common.go        # å…±äº«çš„å“åº”ç»“æ„
         â”‚
         â””â”€â”€ models/              # å†…éƒ¨æ¨¡å‹ï¼ˆrequests + responses å…±äº«ï¼‰
             â”œâ”€â”€ filter.go
             â””â”€â”€ pagination.go

      âœ… é€‚ç”¨ï¼šå¤æ‚åŠŸèƒ½ï¼ŒDTO > 10
      âœ… ä¼˜ç‚¹ï¼šåˆ†ç±»æ¸…æ™°ï¼Œæ˜“äºæŸ¥æ‰¾
      âŒ ç¼ºç‚¹ï¼šç›®å½•å±‚çº§å¢åŠ 
```

---

## DTO å…±äº«ç­–ç•¥å†³ç­–æ ‘

### DTO éœ€è¦è¢«å¤šä¸ªç«¯ä½¿ç”¨å—ï¼Ÿ

```
DTO éœ€è¦è¢«å¤šä¸ªç«¯ä½¿ç”¨å—ï¼Ÿ
â”‚
â”œâ”€ æ˜¯ â†’ Response æ ¼å¼ç›¸åŒå—ï¼Ÿ
â”‚  â”‚
â”‚  â”œâ”€ æ˜¯ â†’ shared/contracts/dtos/ â­
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ç¤ºä¾‹ï¼šshared/contracts/dtos/user_response.go
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€â”€ // Admin åˆ›å»ºç”¨æˆ·è¿”å›æ­¤æ ¼å¼
â”‚  â”‚     â””â”€â”€ // API æ³¨å†Œç”¨æˆ·ä¹Ÿè¿”å›æ­¤æ ¼å¼
â”‚  â”‚
â”‚  â”‚  âœ… ä¿è¯ API ä¸€è‡´æ€§
â”‚  â”‚  âœ… Response å€¾å‘å…±äº«
â”‚  â”‚
â”‚  â””â”€ å¦ â†’ å„ç«¯ç‹¬ç«‹
â”‚     â”‚
â”‚     â”œâ”€ apps/admin/features/xxx/models.go
â”‚     â”‚  â””â”€ type AdminUserResponse struct { ... }  # Admin ç«¯è¿”å›æ›´å¤šå­—æ®µ
â”‚     â”‚
â”‚     â””â”€ apps/api/features/xxx/models.go
â”‚        â””â”€ type UserProfileResponse struct { ... } # API ç«¯è¿”å›åŸºç¡€å­—æ®µ
â”‚
â””â”€ å¦ â†’ ç«¯å†…å¤šä¸ªåŠŸèƒ½ä½¿ç”¨å—ï¼Ÿ
   â”‚
   â”œâ”€ æ˜¯ â†’ apps/*/shared/dtos/
   â”‚  â”‚
   â”‚  â””â”€ ç¤ºä¾‹ï¼šapps/admin/shared/dtos/pagination.go
   â”‚     â”‚
   â”‚     â””â”€ // Admin ç«¯å¤šä¸ªåŠŸèƒ½å…±äº«åˆ†é¡µç»“æ„
   â”‚
   â”‚  âœ… ç«¯å†…å…±äº«ï¼ˆå¦‚ï¼šPaginationã€Filterï¼‰
   â”‚
   â””â”€ å¦ â†’ åŠŸèƒ½å†… DTO
      â”‚
      â”œâ”€ < 3 ä¸ª DTO â†’ ä¸æ“ä½œæ”¾åœ¨ä¸€èµ·
      â”‚  â””â”€ features/xxx/create_xxx.go
      â”‚
      â”œâ”€ 3-10 ä¸ª DTO â†’ åŠŸèƒ½å†… models.go â­
      â”‚  â””â”€ features/xxx/models.go
      â”‚
      â””â”€ > 10 ä¸ª DTO â†’ åˆ†ç±»ç»„ç»‡
         â””â”€ features/xxx/
            â”œâ”€ requests/
            â”œâ”€ responses/
            â””â”€ models/
```

### Request vs Response å…±äº«ç­–ç•¥

```
Request è¿˜æ˜¯ Responseï¼Ÿ
â”‚
â”œâ”€ Request
â”‚  â”‚
â”‚  â”œâ”€ å„ç«¯éœ€æ±‚ç›¸åŒå—ï¼Ÿ
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ç›¸åŒ â†’ shared/contracts/dtos/xxx_request.go
â”‚  â”‚  â”‚  â””â”€ âš ï¸ å°‘è§ï¼Œè°¨æ…å…±äº«
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ä¸åŒ â†’ å„ç«¯ç‹¬ç«‹ â­
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€ apps/admin/features/users/models.go
â”‚  â”‚     â”‚  â””â”€ type CreateUserRequest struct {
â”‚  â”‚     â”‚        Role string  // Admin å¯ä»¥æŒ‡å®šè§’è‰²
â”‚  â”‚     â”‚     }
â”‚  â”‚     â”‚
â”‚  â”‚     â””â”€ apps/api/features/auth/models.go
â”‚  â”‚        â””â”€ type RegisterRequest struct {
â”‚  â”‚              // API ä¸èƒ½æŒ‡å®šè§’è‰²
â”‚  â”‚           }
â”‚  â”‚
â”‚  â””â”€ âœ… Request å€¾å‘ç‹¬ç«‹ï¼ˆä¿æŒçµæ´»æ€§ï¼‰
â”‚
â””â”€ Response
   â”‚
   â”œâ”€ æ ¼å¼å®Œå…¨ç›¸åŒå—ï¼Ÿ
   â”‚  â”‚
   â”‚  â”œâ”€ ç›¸åŒ â†’ shared/contracts/dtos/xxx_response.go â­
   â”‚  â”‚  â””â”€ âœ… ä¿è¯ API ä¸€è‡´æ€§
   â”‚  â”‚
   â”‚  â””â”€ ä¸åŒ â†’ å„ç«¯ç‹¬ç«‹
   â”‚     â””â”€ apps/*/features/*/models.go
   â”‚
   â””â”€ âœ… Response å€¾å‘å…±äº«ï¼ˆä¿è¯ä¸€è‡´æ€§ï¼‰
```

---

## internal ä½¿ç”¨å†³ç­–æ ‘

### è¿™æ®µä»£ç éœ€è¦è¢«å¤–éƒ¨è®¿é—®å—ï¼Ÿ

```
è¿™æ®µä»£ç éœ€è¦è¢«å¤–éƒ¨è®¿é—®å—ï¼Ÿ
â”‚
â”œâ”€ å¦ï¼ˆåªåœ¨åŠŸèƒ½å†…éƒ¨ä½¿ç”¨ï¼‰
â”‚  â””â”€â†’ features/*/internal/
â”‚     â”‚
â”‚     â”œâ”€â”€ entity/              # å†…éƒ¨å®ä½“
â”‚     â”œâ”€â”€ data/                # å†…éƒ¨æ•°æ®è®¿é—®
â”‚     â””â”€â”€ business/            # å†…éƒ¨ä¸šåŠ¡é€»è¾‘
â”‚
â”‚     âœ… ç”¨é€”ï¼š
â”‚        - åŠŸèƒ½å†…éƒ¨åˆ†å±‚
â”‚        - å†…éƒ¨å®ç°ç»†èŠ‚
â”‚        - ä¸å¸Œæœ›è¢«å…¶ä»–åŠŸèƒ½è®¿é—®
â”‚
â”‚     âœ… ç¤ºä¾‹ï¼š
â”‚        features/reports/internal/
â”‚        â”œâ”€â”€ entity/report_entity.go
â”‚        â”œâ”€â”€ data/report_store.go
â”‚        â””â”€â”€ business/report_generator.go
â”‚
â”œâ”€ éœ€è¦åœ¨åº”ç”¨å†…å…±äº«ï¼ˆä½†ä¸è·¨åº”ç”¨ï¼‰
â”‚  â””â”€â†’ apps/*/internal/
â”‚     â”‚
â”‚     â”œâ”€â”€ models/              # åº”ç”¨å†…å…±äº«å®ä½“
â”‚     â”œâ”€â”€ stores/              # åº”ç”¨å†…å…±äº« Store
â”‚     â”œâ”€â”€ utils/               # åº”ç”¨å†…å·¥å…·
â”‚     â””â”€â”€ middleware/          # åº”ç”¨å†…ä¸­é—´ä»¶
â”‚
â”‚     âœ… ç”¨é€”ï¼š
â”‚        - åº”ç”¨ç‰¹å®šçš„æƒé™æ£€æŸ¥
â”‚        - åº”ç”¨ç‰¹å®šçš„ç¼“å­˜ç®¡ç†
â”‚        - åº”ç”¨ç‰¹å®šçš„å·¥å…·å‡½æ•°
â”‚
â”‚     âœ… ç¤ºä¾‹ï¼š
â”‚        apps/admin/internal/
â”‚        â”œâ”€â”€ auth/permission_checker.go  # Admin ç«¯æƒé™
â”‚        â””â”€â”€ cache/admin_cache.go        # Admin ç«¯ç¼“å­˜
â”‚
â””â”€ éœ€è¦è·¨åº”ç”¨å…±äº«
   â””â”€â†’ shared/ï¼ˆä¸ä½¿ç”¨ internalï¼‰
      â”‚
      â”œâ”€â”€ domain/              # å…±äº«é¢†åŸŸæ¨¡å‹
      â”œâ”€â”€ repositories/        # å…±äº«ä»“å‚¨
      â”œâ”€â”€ services/            # å…±äº«æœåŠ¡
      â””â”€â”€ contracts/dtos/      # è·¨ç«¯å…±äº« DTO
â”‚
      âœ… ç”¨é€”ï¼š
         - æ ¸å¿ƒä¸šåŠ¡å®ä½“
         - è·¨ç«¯æ•°æ®è®¿é—®
         - è·¨ç«¯ä¸šåŠ¡æœåŠ¡
â”‚
      âš ï¸ è¯´æ˜ï¼šshared ç›®å½•ä¸‹é€šå¸¸ä¸ä½¿ç”¨ internal
```

### ä»€ä¹ˆåº”è¯¥æ”¾åœ¨ internal é‡Œï¼Ÿä»€ä¹ˆåº”è¯¥æ”¾åœ¨å¤–é¢ï¼Ÿ

```
æˆ‘çš„ä»£ç åº”è¯¥æ”¾åœ¨ internal é‡Œå—ï¼Ÿ
â”‚
â”œâ”€ æ˜¯å¯¹å¤–æ¥å£ï¼Ÿ
â”‚  â”‚
â”‚  â”œâ”€ æ˜¯ï¼ˆDTOã€Handlerã€Controllerï¼‰
â”‚  â”‚  â””â”€â†’ æ”¾åœ¨ internal å¤–é¢ âœ…
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€â”€ models.go            # DTO å¯¹å¤–
â”‚  â”‚     â”œâ”€â”€ create_xxx.go        # Handler å¯¹å¤–
â”‚  â”‚     â”œâ”€â”€ controller.go        # Controller å¯¹å¤–
â”‚  â”‚     â””â”€â”€ service_extensions.go
â”‚  â”‚
â”‚  â””â”€ å¦ï¼ˆå†…éƒ¨å®ç°ï¼‰
â”‚     â””â”€â†’ æ”¾åœ¨ internal é‡Œé¢ âœ…
â”‚        â”‚
â”‚        â””â”€â”€ internal/
â”‚           â”œâ”€â”€ entity/           # å†…éƒ¨å®ä½“
â”‚           â”œâ”€â”€ data/             # å†…éƒ¨æ•°æ®è®¿é—®
â”‚           â””â”€â”€ business/         # å†…éƒ¨ä¸šåŠ¡é€»è¾‘
â”‚
â”œâ”€ æ˜¯å†…éƒ¨å®ä½“ï¼Ÿ
â”‚  â””â”€ æ˜¯ â†’ internal/entity/ âœ…
â”‚
â”œâ”€ æ˜¯æ•°æ®è®¿é—®å±‚ï¼Ÿ
â”‚  â””â”€ æ˜¯ â†’ internal/data/ âœ…
â”‚
â”œâ”€ æ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼Ÿ
â”‚  â””â”€ æ˜¯ â†’ internal/business/ âœ…
â”‚
â””â”€ æ˜¯è½¬æ¢å‡½æ•°ï¼Ÿ
   â”‚
   â”œâ”€ entity â†’ DTO â†’ æ”¾åœ¨ Handler æˆ– models.go âœ…
   â””â”€ domain â†’ entity â†’ æ”¾åœ¨ internal/entity/ âœ…
```

---

## å…±äº«å±‚æ¬¡å†³ç­–æ ‘

### è¿™æ®µä»£ç éœ€è¦è¢«å…±äº«å—ï¼Ÿ

```
è¿™æ®µä»£ç éœ€è¦è¢«å…±äº«å—ï¼Ÿ
â”‚
â”œâ”€ ä¸éœ€è¦å…±äº«
â”‚  â””â”€â†’ ä¿ç•™åœ¨ features/xxx/ å†…
â”‚     â”‚
â”‚     â””â”€ ç¤ºä¾‹ï¼š
â”‚        â””â”€ features/users/create_user.go  # åªåœ¨ users åŠŸèƒ½ç”¨
â”‚
â””â”€ éœ€è¦å…±äº«
   â”‚
   â”œâ”€ åªåœ¨å½“å‰åŠŸèƒ½å†…å…±äº«ï¼Ÿ
   â”‚  â””â”€â†’ features/xxx/internal/
   â”‚     â”‚
   â”‚     â””â”€ ç¤ºä¾‹ï¼š
   â”‚        â””â”€ features/reports/internal/business/
   â”‚           â””â”€ report_generator.go  # åŠŸèƒ½å†…å¤šä¸ª Handler å…±äº«
   â”‚
   â”œâ”€ åœ¨å½“å‰åº”ç”¨å†…å…±äº«ï¼Œä½†ä¸è·¨åº”ç”¨ï¼Ÿ
   â”‚  â”‚
   â”‚  â”œâ”€ æ˜¯å·¥å…·/è¾…åŠ©ä»£ç ï¼Ÿ
   â”‚  â”‚  â””â”€â†’ apps/*/internal/utils/
   â”‚  â”‚     â”‚
   â”‚  â”‚     â””â”€ ç¤ºä¾‹ï¼š
   â”‚  â”‚        â””â”€ apps/admin/internal/utils/
   â”‚  â”‚           â””â”€ string_helper.go  # Admin ç«¯å·¥å…·å‡½æ•°
   â”‚  â”‚
   â”‚  â”œâ”€ æ˜¯åº”ç”¨ç‰¹å®šé€»è¾‘ï¼Ÿ
   â”‚  â”‚  â””â”€â†’ apps/*/internal/
   â”‚  â”‚     â”‚
   â”‚  â”‚     â””â”€ ç¤ºä¾‹ï¼š
   â”‚  â”‚        â””â”€ apps/admin/internal/auth/
   â”‚  â”‚           â””â”€ permission_checker.go  # Admin ç«¯æƒé™æ£€æŸ¥
   â”‚  â”‚
   â”‚  â””â”€ æ˜¯æ ¸å¿ƒä¸šåŠ¡å®ä½“ï¼Ÿ
   â”‚     â””â”€â†’ âš ï¸ é‡æ–°è€ƒè™‘ï¼Œå¯èƒ½åº”è¯¥åœ¨ shared/
   â”‚
   â””â”€ éœ€è¦è·¨åº”ç”¨å…±äº«ï¼Ÿ
      â”‚
      â”œâ”€ æ˜¯æ ¸å¿ƒä¸šåŠ¡å®ä½“ï¼Ÿ
      â”‚  â””â”€â†’ shared/domain/
      â”‚     â”‚
      â”‚     â””â”€ ç¤ºä¾‹ï¼š
      â”‚        â”œâ”€ user.go       # Admin + API éƒ½ç”¨
      â”‚        â”œâ”€ product.go    # Admin + API éƒ½ç”¨
      â”‚        â””â”€ order.go      # Admin + API éƒ½ç”¨
      â”‚
      â”œâ”€ æ˜¯æ•°æ®è®¿é—®ï¼Ÿ
      â”‚  â””â”€â†’ shared/repositories/
      â”‚     â”‚
      â”‚     â””â”€ ç¤ºä¾‹ï¼š
      â”‚        â”œâ”€ user_repository.go
      â”‚        â””â”€ product_repository.go
      â”‚
      â”œâ”€ æ˜¯ä¸šåŠ¡æœåŠ¡ï¼Ÿ
      â”‚  â””â”€â†’ shared/services/
      â”‚     â”‚
      â”‚     â””â”€ ç¤ºä¾‹ï¼š
      â”‚        â”œâ”€ order_service.go
      â”‚        â””â”€ payment_service.go
      â”‚
      â””â”€ æ˜¯ DTOï¼Ÿ
         â””â”€â†’ shared/contracts/dtos/
            â”‚
            â””â”€ ç¤ºä¾‹ï¼š
               â”œâ”€ user_response.go    # è·¨ç«¯ç»Ÿä¸€æ ¼å¼
               â””â”€ product_response.go
```

### å…±äº«å±‚æ¬¡æå‡è·¯å¾„

```
ä»£ç çš„æ¼”è¿›è·¯å¾„ï¼š

åŠŸèƒ½ç§æœ‰
features/xxx/create_xxx.go
    â†“
    éœ€è¦åœ¨åŠŸèƒ½å†…å¤ç”¨
    â†“
åŠŸèƒ½çº§å…±äº«
features/xxx/internal/business/xxx_service.go
    â†“
    éœ€è¦åœ¨åº”ç”¨å†…å¤ç”¨
    â†“
åº”ç”¨çº§å…±äº«
apps/admin/internal/utils/xxx_helper.go
    â†“
    éœ€è¦è·¨åº”ç”¨å¤ç”¨
    â†“
å…¨å±€å…±äº«
shared/domain/xxx.go

âš ï¸ åŸåˆ™ï¼š
   - é»˜è®¤ä¸å…±äº«
   - é€çº§æå‡
   - ä¸è¦è·³çº§
   - è‡³å°‘æœ‰ 2 ä¸ªç«¯çœŸæ­£éœ€è¦æ—¶æ‰æ”¾ shared/
```

---

## å¿«é€Ÿå†³ç­–æµç¨‹

### 5 ç§’å†³ç­–ï¼šæˆ‘çš„ä»£ç åº”è¯¥æ”¾å“ªé‡Œï¼Ÿ

```
1. è·¨ç«¯å…±äº«ï¼Ÿ
   æ˜¯ â†’ shared/
   å¦ â†’ ç»§ç»­

2. åº”ç”¨å†…å…±äº«ï¼Ÿ
   æ˜¯ â†’ apps/*/internal/
   å¦ â†’ ç»§ç»­

3. åŠŸèƒ½å†…å¤ç”¨ï¼Ÿ
   æ˜¯ â†’ features/*/internal/
   å¦ â†’ features/*/ï¼ˆç›´æ¥æ”¾ï¼‰
```

### 5 ç§’å†³ç­–ï¼šæˆ‘åº”è¯¥ç”¨å“ªç§ç»„ç»‡æ¨¡å¼ï¼Ÿ

```
ä»£ç é‡ï¼Ÿ
  < 200 è¡Œ â†’ æ¨¡å¼1
  200-1000 è¡Œ â†’ æ¨¡å¼2 â­
  > 1000 è¡Œ â†’ æ¨¡å¼3
```

### 5 ç§’å†³ç­–ï¼šæˆ‘çš„ DTO åº”è¯¥æ€ä¹ˆç»„ç»‡ï¼Ÿ

```
DTO æ•°é‡ï¼Ÿ
  < 3 ä¸ª â†’ ä¸æ“ä½œä¸€èµ·
  3-10 ä¸ª â†’ models.go â­
  > 10 ä¸ª â†’ requests/ + responses/
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®ç»“æ„ç»„ç»‡](../01-project-structure.md)
- [Domain æ¨¡å‹ç»„ç»‡](../02-domain-models.md)
- [DTO æ¨¡å‹ç»„ç»‡](../03-dto-models.md)
- [internal ç›®å½•ä½¿ç”¨](../04-internal-directory.md)
- [å…±äº«ç­–ç•¥æŒ‡å—](../05-sharing-strategies.md)
- [å¿«é€Ÿå‚è€ƒå¡ç‰‡](./quick-reference.md)
- [æ£€æŸ¥æ¸…å•](./checklist.md)
- [å®Œæ•´é¡¹ç›®ç¤ºä¾‹](./complete-example.md)

---

**æç¤ºï¼š** å½“ä¸ç¡®å®šæ—¶ï¼Œå‚è€ƒè¿™äº›å†³ç­–æ ‘ï¼ä¿å­˜æ­¤é¡µé¢ä»¥ä¾¿å¿«é€ŸæŸ¥é˜…ã€‚
